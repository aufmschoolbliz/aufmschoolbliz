<ion-view view-title="Accounts">
    <ion-content>
        <ion-refresher
                pulling-text="Pull to refresh..."
                on-refresh="requestAccounts()"
                spinner="none">
        </ion-refresher>
        <ion-item type="item-text-wrap" ng-click="openAccountsQueryModal()">
            <div class="row">
                <div class="col col-75 padding-right">
                    <h2 style="font-size: 1.3em; font-weight: 500;" class="positive">{{semester}}</h2>

                    <p>A.Y {{syFrom}}-{{syTo}}</p>
                </div>
            </div>
        </ion-item>
        <ion-list>
            <div class="center padding-top" ng-show="isLoading">
                <ion-spinner></ion-spinner>
            </div>
            <div class="center padding-top" ng-show="hasMessage">
                <h3>{{message}}</h3>
            </div>
            <div class="list card" ng-show="!isLoading && !hasMessage" ng-repeat-start="account in accounts"
                 ng-if="$first">
                <div class="item item-divider">{{account.name}}</div>
                <div class="item item-body">
                    <div>
                        Balance: {{account.balance}}
                    </div>
                </div>
            </div>
            <ion-item ng-show="!isLoading && !hasMessage" ng-repeat-end ng-if="!$first" type="item-text-wrap"
                      href="#/tab/grades/{{grade.id}}">
                <div class="row">
                    <div class="col col-80">
                        <h2>{{account.particulars}}</h2>

                        <p ng-show="account.date">{{account.date}}</p>

                        <p ng-show="account.collectedBy">Collected by: {{account.collectedBy}}</p>

                        <p ng-show="account.debit">Debit: {{account.debit}}</p>

                        <p ng-show="account.credit">Credit: {{account.credit}}</p>

                        <p ng-show="account.balance">Balance: {{account.balance}}</p>
                    </div>
                </div>
            </ion-item>
        </ion-list>
    </ion-content>
</ion-view>
